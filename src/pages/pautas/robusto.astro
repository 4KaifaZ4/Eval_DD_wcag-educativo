---
// src/pages/pautas/robusto.astro
import MainLayout from '../../layouts/MainLayout.astro';
import WCAGBadge from '../../components/WCAGBadge.astro';

const pageTitle = "Pauta 4: Robusto - Principios de Accesibilidad WCAG";
const pageDescription = "Asegura que el contenido sea interpretable por navegadores actuales y futuros, incluyendo tecnolog√≠as asistivas, mediante HTML v√°lido y sem√°ntico.";
---

<MainLayout title={pageTitle} description={pageDescription}>
  <article class="container mx-auto px-4 py-12 max-w-4xl">
    <header class="mb-12 text-center">
      <h1 class="text-4xl font-bold mb-4 text-indigo-700 dark:text-indigo-400">{pageTitle}</h1>
      <WCAGBadge level="AA" class="mx-auto mb-6" />
      <p class="text-xl max-w-2xl mx-auto leading-relaxed">{pageDescription}</p>
    </header>
    
    <!-- Secci√≥n 4.1 Compatible -->
    <section aria-labelledby="compatible" class="mb-16 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
      <h2 id="compatible" class="text-3xl font-bold mb-6 pb-2 border-b-2 border-indigo-200 dark:border-gray-700">
        4.1 Compatible
      </h2>
      
      <p class="mb-6 text-lg">Maximiza la compatibilidad con navegadores y tecnolog√≠as asistivas actuales y futuras.</p>
      
      <div class="grid md:grid-cols-2 gap-8 my-8">
        <!-- Ejemplo MALO -->
        <div class="border-2 border-red-400 dark:border-red-600 p-6 rounded-lg bg-red-50 dark:bg-gray-900">
          <h3 class="font-bold text-xl text-red-700 dark:text-red-400 mb-4 flex items-center">
            <span class="bg-red-100 dark:bg-red-900 p-2 rounded-full mr-3">‚ùå</span>
            HTML no sem√°ntico
          </h3>
          <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
            <div class="code-block bg-gray-900 text-gray-100 p-4 rounded text-sm overflow-x-auto">
              <pre><code>&lt;div onclick="submitForm()"&gt;Enviar&lt;/div&gt;</code></pre>
            </div>
            <p class="mt-3 text-sm text-red-600 dark:text-red-400">
              <strong>Problemas:</strong> No sem√°ntico, falta rol ARIA, no operable por teclado, sin estado de foco.
            </p>
          </div>
        </div>
        
        <!-- Ejemplo BUENO -->
        <div class="border-2 border-green-400 dark:border-green-600 p-6 rounded-lg bg-green-50 dark:bg-gray-900">
          <h3 class="font-bold text-xl text-green-700 dark:text-green-400 mb-4 flex items-center">
            <span class="bg-green-100 dark:bg-green-900 p-2 rounded-full mr-3">‚úÖ</span>
            HTML sem√°ntico v√°lido
          </h3>
          <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
            <div class="code-block bg-gray-900 text-gray-100 p-4 rounded text-sm overflow-x-auto">
              <pre><code>&lt;button 
  type="submit"
  class="btn-primary"
  onclick="submitForm()"
  onkeydown="if(event.key==='Enter') submitForm()"
&gt;
  Enviar
&lt;/button&gt;</code></pre>
            </div>
            <p class="mt-3 text-sm text-green-600 dark:text-green-400">
              <strong>Ventajas:</strong> Sem√°ntico, operable por teclado, auto-documentado, compatible con AT.
            </p>
          </div>
        </div>
      </div>

      <div class="mt-8 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800">
        <h3 class="text-xl font-semibold mb-4 text-blue-700 dark:text-blue-400">üìå Buenas pr√°cticas:</h3>
        <ul class="space-y-3 pl-5 list-disc">
          <li>Usa elementos HTML5 sem√°nticos (<code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">&lt;nav&gt;</code>, <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">&lt;article&gt;</code>, etc.)</li>
          <li>Implementa ARIA solo cuando sea necesario</li>
          <li>Valida tu HTML con <a href="https://validator.w3.org/" class="text-indigo-600 dark:text-indigo-400 hover:underline">W3C Validator</a></li>
          <li>Prueba con lectores de pantalla (NVDA, VoiceOver)</li>
          <li>Usa <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">&lt;button&gt;</code> para acciones, <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">&lt;a&gt;</code> para navegaci√≥n</li>
        </ul>
      </div>
    </section>
    
    <!-- Secci√≥n 4.1.1 Procesamiento -->
    <section aria-labelledby="parsing" class="mb-16 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
      <h2 id="parsing" class="text-3xl font-bold mb-6 pb-2 border-b-2 border-indigo-200 dark:border-gray-700">
        4.1.1 Procesamiento
      </h2>
      
      <p class="mb-6 text-lg">El HTML debe estar bien formado para garantizar una interpretaci√≥n consistente.</p>
      
      <div class="grid md:grid-cols-2 gap-8 my-8">
        <!-- Ejemplo MALO -->
        <div class="border-2 border-red-400 dark:border-red-600 p-6 rounded-lg bg-red-50 dark:bg-gray-900">
          <h3 class="font-bold text-xl text-red-700 dark:text-red-400 mb-4 flex items-center">
            <span class="bg-red-100 dark:bg-red-900 p-2 rounded-full mr-3">‚ùå</span>
            HTML mal formado
          </h3>
          <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
            <div class="code-block bg-gray-900 text-gray-100 p-4 rounded text-sm overflow-x-auto">
              <pre><code>&lt;div class="card"&gt;
  &lt;h3&gt;T√≠tulo
  &lt;p&gt;Contenido&lt;/div&gt;
&lt;/p&gt;</code></pre>
            </div>
            <p class="mt-3 text-sm text-red-600 dark:text-red-400">
              <strong>Problemas:</strong> Etiquetas sin cerrar, anidamiento incorrecto, estructura inv√°lida.
            </p>
          </div>
        </div>
        
        <!-- Ejemplo BUENO -->
        <div class="border-2 border-green-400 dark:border-green-600 p-6 rounded-lg bg-green-50 dark:bg-gray-900">
          <h3 class="font-bold text-xl text-green-700 dark:text-green-400 mb-4 flex items-center">
            <span class="bg-green-100 dark:bg-green-900 p-2 rounded-full mr-3">‚úÖ</span>
            HTML v√°lido
          </h3>
          <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
            <div class="code-block bg-gray-900 text-gray-100 p-4 rounded text-sm overflow-x-auto">
              <pre><code>&lt;article class="card"&gt;
  &lt;h3&gt;T√≠tulo&lt;/h3&gt;
  &lt;p&gt;Contenido&lt;/p&gt;
&lt;/article&gt;</code></pre>
            </div>
            <p class="mt-3 text-sm text-green-600 dark:text-green-400">
              <strong>Beneficios:</strong> Mejor rendimiento, consistencia entre navegadores, accesibilidad garantizada.
            </p>
          </div>
        </div>
      </div>

      <div class="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg border border-purple-200 dark:border-purple-800">
        <h3 class="text-xl font-semibold mb-4 text-purple-700 dark:text-purple-400">üõ†Ô∏è Herramientas de validaci√≥n:</h3>
        <ul class="grid md:grid-cols-2 gap-4">
          <li>
            <a href="https://validator.w3.org/" class="flex items-center hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors">
              <span class="mr-2">üåê</span>
              <span>Validador HTML del W3C</span>
            </a>
          </li>
          <li>
            <a href="https://wave.webaim.org/" class="flex items-center hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors">
              <span class="mr-2">üåä</span>
              <span>WAVE Accessibility Tool</span>
            </a>
          </li>
          <li>
            <a href="https://www.deque.com/axe/" class="flex items-center hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors">
              <span class="mr-2">ü™ì</span>
              <span>axe DevTools</span>
            </a>
          </li>
          <li>
            <a href="https://developer.mozilla.org/es/docs/Tools/View_source" class="flex items-center hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors">
              <span class="mr-2">üîç</span>
              <span>View Source de Firefox</span>
            </a>
          </li>
        </ul>
      </div>
    </section>

    <!-- Secci√≥n 4.1.2 Nombre, Rol, Valor -->
    <section aria-labelledby="name-role-value" class="mb-16 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
      <h2 id="name-role-value" class="text-3xl font-bold mb-6 pb-2 border-b-2 border-indigo-200 dark:border-gray-700">
        4.1.2 Nombre, Rol, Valor
      </h2>
      
      <p class="mb-6 text-lg">Todos los componentes UI deben exponer nombre, rol y valor a las tecnolog√≠as asistivas.</p>
      
      <div class="grid md:grid-cols-2 gap-8 my-8">
        <div class="bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-lg border border-yellow-200 dark:border-yellow-800">
          <h3 class="text-xl font-semibold mb-4 text-yellow-700 dark:text-yellow-400">üéØ Ejemplo pr√°ctico:</h3>
          <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
            <label for="search-input" class="block mb-2">Buscar productos:</label>
            <div class="flex">
              <input 
                type="search" 
                id="search-input" 
                aria-label="Buscar" 
                placeholder="Escribe aqu√≠..." 
                class="px-4 py-2 border border-gray-300 rounded-l flex-grow focus:outline-none focus:ring-2 focus:ring-indigo-500"
              >
              <button 
                type="submit" 
                aria-label="Ejecutar b√∫squeda" 
                class="px-4 py-2 bg-indigo-600 text-white rounded-r hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              >
                üîç
              </button>
            </div>
            <p class="mt-3 text-sm">Este control expone:</p>
            <ul class="mt-2 pl-5 list-disc text-sm">
              <li><strong>Nombre:</strong> "Buscar productos" (label + aria-label)</li>
              <li><strong>Rol:</strong> "searchbox" (impl√≠cito por type="search")</li>
              <li><strong>Valor:</strong> Texto introducido por el usuario</li>
            </ul>
          </div>
        </div>
        
        <div class="bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-lg border border-indigo-200 dark:border-indigo-800">
          <h3 class="text-xl font-semibold mb-4 text-indigo-700 dark:text-indigo-400">‚ÑπÔ∏è Atributos ARIA esenciales:</h3>
          <ul class="space-y-3 pl-5 list-disc">
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-label</code>: Proporciona un nombre accesible</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-labelledby</code>: Referencia a un elemento que act√∫a como label</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-describedby</code>: Referencia a descripci√≥n adicional</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">role</code>: Define el tipo de componente (usar con precauci√≥n)</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-current</code>: Indica el elemento actual en un conjunto</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Secci√≥n 4.1.3 Mensajes de Estado -->
    <section aria-labelledby="status-messages" class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
      <h2 id="status-messages" class="text-3xl font-bold mb-6 pb-2 border-b-2 border-indigo-200 dark:border-gray-700">
        4.1.3 Mensajes de Estado
      </h2>
      
      <p class="mb-6 text-lg">Los mensajes din√°micos deben ser anunciados por los lectores de pantalla sin interrumpir la tarea actual.</p>
      
      <div class="bg-green-50 dark:bg-green-900/20 p-6 rounded-lg border border-green-200 dark:border-green-800">
        <h3 class="text-xl font-semibold mb-4 text-green-700 dark:text-green-400">üí° Implementaci√≥n correcta:</h3>
        <div class="bg-white dark:bg-gray-800 p-4 rounded border border-gray-200 dark:border-gray-700">
          <div id="live-region" aria-live="polite" class="sr-only"></div>
          <button 
            id="show-alert" 
            class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          >
            Mostrar notificaci√≥n
          </button>
          <p class="mt-3 text-sm">Al hacer clic, el mensaje se anunciar√° mediante:</p>
          <div class="code-block bg-gray-900 text-gray-100 p-4 rounded text-sm overflow-x-auto mt-2">
            <pre><code>&lt;div aria-live="polite" class="sr-only"&gt;
  Mensaje que ser√° anunciado
&lt;/div&gt;</code></pre>
          </div>
        </div>
      </div>

      <div class="mt-8 grid md:grid-cols-2 gap-6">
        <div class="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800">
          <h3 class="text-xl font-semibold mb-4 text-blue-700 dark:text-blue-400">üéöÔ∏è Tipos de aria-live:</h3>
          <ul class="space-y-3 pl-5 list-disc">
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-live="polite"</code>: Anuncia cuando el usuario est√© inactivo</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-live="assertive"</code>: Interrumpe para anunciar inmediatamente</li>
            <li><code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">aria-live="off"</code>: Desactiva anuncios (valor por defecto)</li>
          </ul>
        </div>
        
        <div class="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg border border-purple-200 dark:border-purple-800">
          <h3 class="text-xl font-semibold mb-4 text-purple-700 dark:text-purple-400">üìù Casos de uso:</h3>
          <ul class="space-y-2 pl-5 list-disc">
            <li>Notificaciones de √©xito/error</li>
            <li>Resultados de b√∫squeda din√°micos</li>
            <li>Contadores de caracteres restantes</li>
            <li>Cambios en el estado de formularios</li>
            <li>Mensajes de carga/completado</li>
          </ul>
        </